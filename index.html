<!DOCTYPE HTML>
<html>
  <head>
    <title>免费看视频</title>
    <link href="https://cdn.bootcss.com/twitter-bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
  </head>
  
  <body class="container">
    <select id="j-type">
      <option value="iqiyi">iqiyi</option>
    </select>
    <input name="keyword" id="j-keyword">
    <button onclick="search()">搜索</button>
    
    <div id="j-search-result">
      
    </div>
    
    <div>本站不进行任何资源存储，只提供影视检索服务.</div>
    
    <script>
      function search() {
        var type = $('#j-type').val();
        if (type === 'iqiyi') {
          iqiyiSearch();
        }
      }
      
      function iqiyiSearch() {
        var keyword = $('#j-keyword').val();
        var url = 'https://m.iqiyi.com/search.html?key=' + encodeURIComponent(keyword);
        req({
          url: url,
          method: 'GET',
          success: function(result, status, xhr) {
            
          }
        });
      }
      
      function req(options) {
        $.ajax({
          url: 'https://http1.herokuapp.com/x',
          type: 'POST',
          contentType: 'application/x-www-form-urlencoded',
          timeout: 30000,
          data: {
            'url': options.url,
            'headers[user-agent]': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',
            'method': options.method,
            'body': options.body ? {} : options.body
          },
          success: function(result, status, xhr) {
            options.success(result, status, xhr);
          },
          error: function(xhr, status, error) {
            if (options.error) {
              options.error(xhr, status, error);
            }
          }
        })
      }
    </script>
  </body>
</html>
